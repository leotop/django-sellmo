(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
require("./product");

require("./address");



},{"./address":2,"./product":3}],2:[function(require,module,exports){
var slice = [].slice;

(function($, window) {
  var CopyAddress;
  CopyAddress = (function() {
    CopyAddress.prototype.defaults = {
      fromSelector: '#shipping-address',
      toSelector: '#billing-address'
    };

    function CopyAddress(el, options) {
      this.options = $.extend({}, this.defaults, options);
      this.$el = $(el);
      this.$from = $(this.options.fromSelector);
      this.$to = $(this.options.toSelector);
      this.$from.on('change', (function(_this) {
        return function() {
          return _this.update();
        };
      })(this));
      this.$el.on('change', (function(_this) {
        return function() {
          return _this.update();
        };
      })(this));
      this.update();
    }

    CopyAddress.prototype.update = function() {
      if (this.$el.is(':checked')) {
        this.$to.hide();
        return $('input', this.$from).each(function(i, el) {
          var selector;
          selector = 'input.' + $(el).attr('class').split(' ')[0];
          return $(selector, this.$to).val($(selector, this.$from).val());
        });
      } else {
        return this.$to.show();
      }
    };

    return CopyAddress;

  })();
  return $.fn.extend({
    copyAddress: function() {
      var args, option;
      option = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      return this.each(function() {
        var $this, data;
        $this = $(this);
        data = $this.data('copyAddress');
        if (!data) {
          $this.data('copyAddress', (data = new CopyAddress(this, option)));
        }
        if (typeof option === 'string') {
          return data[option].apply(data, args);
        }
      });
    }
  });
})(window.jQuery, window);



},{}],3:[function(require,module,exports){
var slice = [].slice;

(function($, window) {
  var ProductAvailability;
  ProductAvailability = (function() {
    ProductAvailability.prototype.defaults = {
      availabilitySelector: '.product-availability',
      templateSelector: '#product-availability-template',
      template: null,
      stocks: null,
      delays: null,
      stock: null,
      delay: null
    };

    function ProductAvailability(el, options) {
      var template;
      this.options = $.extend({}, this.defaults, options);
      this.$el = $(el);
      if (!this.options.template) {
        template = $(this.options.templateSelector).html();
      } else {
        template = $(this.options.template);
      }
      this.template = Handlebars.compile(template);
      this.updateAvailability();
      this.$variation = $('select.variation', this.$el);
      $('option', this.$variation).each((function(_this) {
        return function(i, option) {
          var $option, key, stock;
          $option = $(option);
          key = $option.val();
          stock = _this.options.stocks[key];
          if (stock > 0) {
            _this.$variation.val(key);
            _this.updateAvailability();
            return false;
          }
        };
      })(this));
      this.$variation.on('change', (function(_this) {
        return function(evt) {
          return _this.updateAvailability();
        };
      })(this));
    }

    ProductAvailability.prototype.updateAvailability = function() {
      var available, context, delay, key, select, stock;
      if (this.options.stocks !== null) {
        select = $('select.variation', this.$el);
        key = select.val();
        stock = this.options.stocks[key];
        delay = this.options.delays[key];
      } else {
        stock = this.options.stock;
        delay = this.options.delay;
      }
      available = stock > 0 || delay !== false;
      if (available) {
        $('input[type=submit]', this.$el).removeAttr('disabled', 'disabled');
      } else {
        $('input[type=submit]', this.$el).attr('disabled', 'disabled');
      }
      context = {
        stock: stock,
        delay: delay,
        available: available
      };
      return $(this.options.availabilitySelector, this.$el).html(this.template(context));
    };

    return ProductAvailability;

  })();
  return $.fn.extend({
    productAvailability: function() {
      var args, option;
      option = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];
      return this.each(function() {
        var $this, data;
        $this = $(this);
        data = $this.data('productAvailability');
        if (!data) {
          $this.data('productAvailability', (data = new ProductAvailability(this, option)));
        }
        if (typeof option === 'string') {
          return data[option].apply(data, args);
        }
      });
    }
  });
})(window.jQuery, window);



},{}]},{},[1])


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zcmMvY29mZmVlL3BsdWdpbnMvaW5kZXguY29mZmVlIiwiLi4vc3JjL2NvZmZlZS9wbHVnaW5zL2FkZHJlc3MuY29mZmVlIiwiLi4vc3JjL2NvZmZlZS9wbHVnaW5zL3Byb2R1Y3QuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsT0FBQSxDQUFRLFdBQVIsQ0FBQSxDQUFBOztBQUFBLE9BQ0EsQ0FBUSxXQUFSLENBREEsQ0FBQTs7Ozs7QUNBQSxJQUFBLGdCQUFBOztBQUFBLENBQUMsU0FBQyxDQUFELEVBQUksTUFBSixHQUFBO0FBRUMsTUFBQSxXQUFBO0FBQUEsRUFBTTtBQUVKLDBCQUFBLFFBQUEsR0FBVTtBQUFBLE1BQ1IsWUFBQSxFQUFjLG1CQUROO0FBQUEsTUFFUixVQUFBLEVBQVksa0JBRko7S0FBVixDQUFBOztBQUthLElBQUEscUJBQUMsRUFBRCxFQUFLLE9BQUwsR0FBQTtBQUNYLE1BQUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxDQUFDLENBQUMsTUFBRixDQUFTLEVBQVQsRUFBYSxJQUFDLENBQUEsUUFBZCxFQUF3QixPQUF4QixDQUFYLENBQUE7QUFBQSxNQUNBLElBQUMsQ0FBQSxHQUFELEdBQU8sQ0FBQSxDQUFFLEVBQUYsQ0FEUCxDQUFBO0FBQUEsTUFFQSxJQUFDLENBQUEsS0FBRCxHQUFTLENBQUEsQ0FBRSxJQUFDLENBQUEsT0FBTyxDQUFDLFlBQVgsQ0FGVCxDQUFBO0FBQUEsTUFHQSxJQUFDLENBQUEsR0FBRCxHQUFPLENBQUEsQ0FBRSxJQUFDLENBQUEsT0FBTyxDQUFDLFVBQVgsQ0FIUCxDQUFBO0FBQUEsTUFLQSxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQVAsQ0FBVSxRQUFWLEVBQW9CLENBQUEsU0FBQSxLQUFBLEdBQUE7ZUFBQSxTQUFBLEdBQUE7aUJBQ2xCLEtBQUMsQ0FBQSxN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QixNQUExQixDQUFaLENBQWxDLENBQUEsQ0FERjtTQUhBO0FBS0EsUUFBQSxJQUFHLE1BQUEsQ0FBQSxNQUFBLEtBQWlCLFFBQXBCO2lCQUNFLElBQUssQ0FBQSxNQUFBLENBQU8sQ0FBQyxLQUFiLENBQW1CLElBQW5CLEVBQXlCLElBQXpCLEVBREY7U0FOSTtNQUFBLENBQU4sRUFEK0I7SUFBQSxDQUFyQjtHQUFaLEVBdEVEO0FBQUEsQ0FBRCxDQUFBLENBaUZFLE1BQU0sQ0FBQyxNQWpGVCxFQWlGaUIsTUFqRmpCLENBQUEsQ0FBQSIsImZpbGUiOiJzaG9wL2pzL3Nob3AuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInJlcXVpcmUgXCIuL3Byb2R1Y3RcIlxucmVxdWlyZSBcIi4vYWRkcmVzc1wiIiwiKCgkLCB3aW5kb3cpIC0+XG5cbiAgY2xhc3MgQ29weUFkZHJlc3NcblxuICAgIGRlZmF1bHRzOiB7XG4gICAgICBmcm9tU2VsZWN0b3I6ICcjc2hpcHBpbmctYWRkcmVzcycsXG4gICAgICB0b1NlbGVjdG9yOiAnI2JpbGxpbmctYWRkcmVzcycsXG4gICAgfVxuXG4gICAgY29uc3RydWN0b3I6IChlbCwgb3B0aW9ucykgLT5cbiAgICAgIEBvcHRpb25zID0gJC5leHRlbmQoe30sIEBkZWZhdWx0cywgb3B0aW9ucylcbiAgICAgIEAkZWwgPSAkKGVsKVxuICAgICAgQCRmcm9tID0gJChAb3B0aW9ucy5mcm9tU2VsZWN0b3IpXG4gICAgICBAJHRvID0gJChAb3B0aW9ucy50b1NlbGVjdG9yKVxuICAgICAgXG4gICAgICBAJGZyb20ub24gJ2NoYW5nZScsID0+XG4gICAgICAgIEB1cGRhdGUoKVxuICAgICAgXG4gICAgICBAJGVsLm9uICdjaGFuZ2UnLCA9PlxuICAgICAgICBAdXBkYXRlKClcbiAgICAgIEB1cGRhdGUoKVxuICAgIFxuICAgIHVwZGF0ZTogKCkgLT5cbiAgICAgIGlmIEAkZWwuaXMoJzpjaGVja2VkJylcbiAgICAgICAgQCR0by5oaWRlKClcbiAgICAgICAgJCgnaW5wdXQnLCBAJGZyb20pLmVhY2ggKGksIGVsKSAtPlxuICAgICAgICAgICMgZmllbGQgbXVzdCBiZSB0aGUgZmlyc3QgY3NzIGNsYXNzIGRlZmluZWRcbiAgICAgICAgICBzZWxlY3RvciA9ICdpbnB1dC4nICsgJChlbCkuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpWzBdXG4gICAgICAgICAgJChzZWxlY3RvciwgQCR0bykudmFsKCQoc2VsZWN0b3IsIEAkZnJvbSkudmFsKCkpXG4gICAgICBlbHNlXG4gICAgICAgIEAkdG8uc2hvdygpXG5cblxuICAkLmZuLmV4dGVuZCBjb3B5QWRkcmVzczogKG9wdGlvbiwgYXJncy4uLikgLT5cbiAgICBAZWFjaCAtPlxuICAgICAgJHRoaXMgPSAkKHRoaXMpXG4gICAgICBkYXRhID0gJHRoaXMuZGF0YSgnY29weUFkZHJlc3MnKVxuICAgICAgaWYgIWRhdGFcbiAgICAgICAgJHRoaXMuZGF0YSAnY29weUFkZHJlc3MnLCAoZGF0YSA9IG5ldyBDb3B5QWRkcmVzcyh0aGlzLCBvcHRpb24pKVxuICAgICAgaWYgdHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJ1xuICAgICAgICBkYXRhW29wdGlvbl0uYXBwbHkoZGF0YSwgYXJncylcblxuXG4pIHdpbmRvdy5qUXVlcnksIHdpbmRvdyIsIigoJCwgd2luZG93KSAtPlxuXG4gIGNsYXNzIFByb2R1Y3RBdmFpbGFiaWxpdHlcblxuICAgIGRlZmF1bHRzOiB7XG4gICAgICBhdmFpbGFiaWxpdHlTZWxlY3RvcjogJy5wcm9kdWN0LWF2YWlsYWJpbGl0eScsXG4gICAgICB0ZW1wbGF0ZVNlbGVjdG9yOiAnI3Byb2R1Y3QtYXZhaWxhYmlsaXR5LXRlbXBsYXRlJyxcbiAgICAgIHRlbXBsYXRlOiBudWxsLFxuICAgICAgc3RvY2tzOiBudWxsLFxuICAgICAgZGVsYXlzOiBudWxsLFxuICAgICAgc3RvY2s6IG51bGwsXG4gICAgICBkZWxheTogbnVsbCxcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcjogKGVsLCBvcHRpb25zKSAtPlxuICAgICAgQG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQGRlZmF1bHRzLCBvcHRpb25zKVxuICAgICAgQCRlbCA9ICQoZWwpXG4gICAgICBcbiAgICAgIGlmIG5vdCBAb3B0aW9ucy50ZW1wbGF0ZVxuICAgICAgICB0ZW1wbGF0ZSA9ICQoQG9wdGlvbnMudGVtcGxhdGVTZWxlY3RvcikuaHRtbCgpXG4gICAgICBlbHNlXG4gICAgICAgIHRlbXBsYXRlID0gJChAb3B0aW9ucy50ZW1wbGF0ZSlcbiAgICAgIFxuICAgICAgIyBDb21waWxlIHRlbXBsYXRlIGFuZCBrZWVwIHJlZlxuICAgICAgQHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKHRlbXBsYXRlKTtcbiAgICAgIFxuICAgICAgIyBJbml0aWFsaXplIHN0YXRlXG4gICAgICBAdXBkYXRlQXZhaWxhYmlsaXR5KClcbiAgICBcbiAgICAgICMgRmluZCB2YXJpYXRpb24gc2VsZWN0XG4gICAgICBAJHZhcmlhdGlvbiA9ICQoJ3NlbGVjdC52YXJpYXRpb24nLCBAJGVsKVxuICAgICAgXG4gICAgICAjIFRyeSB0byBmaW5kIGZpcnN0IG9wdGlvbiB0byBiZSBpbiBzdG9ja1xuICAgICAgJCgnb3B0aW9uJywgQCR2YXJpYXRpb24pLmVhY2ggKGksIG9wdGlvbikgPT5cbiAgICAgICAgICAkb3B0aW9uID0gJChvcHRpb24pXG4gICAgICAgICAga2V5ID0gJG9wdGlvbi52YWwoKVxuICAgICAgICAgIHN0b2NrID0gQG9wdGlvbnMuc3RvY2tzW2tleV1cbiAgICAgICAgICBpZiBzdG9jayA+IDBcbiAgICAgICAgICAgICAgQCR2YXJpYXRpb24udmFsKGtleSlcbiAgICAgICAgICAgICAgQHVwZGF0ZUF2YWlsYWJpbGl0eSgpXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgXG4gICAgICAjIEhhbmRsZSB1c2VyIGlucHV0XG4gICAgICBAJHZhcmlhdGlvbi5vbiAnY2hhbmdlJywgKGV2dCkgPT5cbiAgICAgICAgICBAdXBkYXRlQXZhaWxhYmlsaXR5KClcbiAgICAgIFxuICAgIHVwZGF0ZUF2YWlsYWJpbGl0eTogKCkgLT5cbiAgICAgIFxuICAgICAgaWYgQG9wdGlvbnMuc3RvY2tzICE9IG51bGxcbiAgICAgICAgICBzZWxlY3QgPSAkKCdzZWxlY3QudmFyaWF0aW9uJywgQCRlbClcbiAgICAgICAgICBrZXkgPSBzZWxlY3QudmFsKClcbiAgICAgICAgICBzdG9jayA9IEBvcHRpb25zLnN0b2Nrc1trZXldXG4gICAgICAgICAgZGVsYXkgPSBAb3B0aW9ucy5kZWxheXNba2V5XVxuICAgICAgZWxzZVxuICAgICAgICAgIHN0b2NrID0gQG9wdGlvbnMuc3RvY2tcbiAgICAgICAgICBkZWxheSA9IEBvcHRpb25zLmRlbGF5XG4gICAgICBcbiAgICAgIGF2YWlsYWJsZSA9IHN0b2NrID4gMCBvciBkZWxheSAhPSBmYWxzZVxuICAgICAgXG4gICAgICBpZiBhdmFpbGFibGVcbiAgICAgICAgICAjIEVuYWJsZSBhZGQgdG8gY2FydCBidXR0b25cbiAgICAgICAgICAkKCdpbnB1dFt0eXBlPXN1Ym1pdF0nLCBAJGVsKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpXG4gICAgICBlbHNlXG4gICAgICAgICAgIyBEaXNhYmxlXG4gICAgICAgICAgJCgnaW5wdXRbdHlwZT1zdWJtaXRdJywgQCRlbCkuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKVxuICAgIFxuICAgICAgY29udGV4dCA9IHtzdG9jazogc3RvY2ssIGRlbGF5OiBkZWxheSwgYXZhaWxhYmxlOiBhdmFpbGFibGV9XG4gICAgICAkKEBvcHRpb25zLmF2YWlsYWJpbGl0eVNlbGVjdG9yLCBAJGVsKS5odG1sKEB0ZW1wbGF0ZShjb250ZXh0KSlcbiAgICAgICBcblxuICAkLmZuLmV4dGVuZCBwcm9kdWN0QXZhaWxhYmlsaXR5OiAob3B0aW9uLCBhcmdzLi4uKSAtPlxuICAgIEBlYWNoIC0+XG4gICAgICAkdGhpcyA9ICQodGhpcylcbiAgICAgIGRhdGEgPSAkdGhpcy5kYXRhKCdwcm9kdWN0QXZhaWxhYmlsaXR5JylcblxuICAgICAgaWYgIWRhdGFcbiAgICAgICAgJHRoaXMuZGF0YSAncHJvZHVjdEF2YWlsYWJpbGl0eScsIChkYXRhID0gbmV3IFByb2R1Y3RBdmFpbGFiaWxpdHkodGhpcywgb3B0aW9uKSlcbiAgICAgIGlmIHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZydcbiAgICAgICAgZGF0YVtvcHRpb25dLmFwcGx5KGRhdGEsIGFyZ3MpXG4gICAgICAgIFxuXG4pIHdpbmRvdy5qUXVlcnksIHdpbmRvdyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==